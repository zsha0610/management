������ʽ

����
1. �ı������Ѿ���Ϊ������ĳ�������֮һ
2. ���ı����ݵ�����,��λ,��ȡ���߼��Ƚϸ��ӵĹ���
3. Ϊ�˿��ٷ���Ľ����������,������������ʽ

����: ���ı��ĸ߼�ƥ��ģʽ,�ṩ�����滻�ȹ���.�䱾��       ��һϵ�����ַ������������ɵ��ַ���,����ַ���       ��������ʽ

ƥ��ԭ�� : ����ͨ���ַ���������Ź���,ͨ�������ַ���            �ظ�,λ��,�������Ϊ�ﵽƥ��ĳһ���ַ�����            Ŀ��

�����ص� : 
    * ���㴦���ı�
    * ֧�������ڶ�
    * ʹ��������

Ŀ�� : 1. ��������������ʽ����
       2. ����������ʽ,��д�򵥵�������ʽ
       3. �ܹ�ʹ��Python  re����������ʽ

Python  --> reģ��

re.findall(pattern,string)
����: ʹ��������ʽƥ���ַ���
����: pattern   ������ʽ
      string   Ŀ���ַ���
����ֵ : ����ƥ�������б�


Ԫ�ַ���ʹ��

1. ��ͨ�ַ�

Ԫ�ַ� :  a  B   c
ƥ�����: ÿ���ַ�ƥ���Ӧ�������ַ�

In [15]: re.findall('ab','abcdaefabcdef')
Out[15]: ['ab', 'ab']

In [16]: re.findall('���','���,����')
Out[16]: ['���']

2.  ��

Ԫ�ַ� : |
ƥ�����: ƥ�� | ��������һ��������ʽ

In [24]: re.findall('ab|cd',"abcdef")
Out[24]: ['ab', 'cd']

3. ƥ�䵥���ַ�

Ԫ�ַ� :  .
ƥ�����: ƥ�������������һ���ַ�

f.o --> foo  fao

In [25]: re.findall('f.o',"foo fao")
Out[25]: ['foo', 'fao']

4. ƥ���ַ�����ʼλ��

Ԫ�ַ� : ^
ƥ�����: ƥ��Ŀ���ַ����Ŀ�ʼλ��

In [29]: re.findall('^Jame',"Jame is a boy")
Out[29]: ['Jame']

5. ƥ���ַ�������λ��

Ԫ�ַ� : $
ƥ�����: ƥ��Ŀ���ַ����Ľ���λ��

In [32]: re.findall('Jame$',"Hi,Jame")
Out[32]: ['Jame']

6. ƥ���ظ�

Ԫ�ַ� : *
ƥ�����: ƥ��ǰ����ַ�����0�λ���

fo* --> fooooooooooo   f

In [34]: re.findall('fo*',"fooooooabceffo")
Out[34]: ['foooooo', 'f', 'fo']

7. ƥ���ظ�

Ԫ�ַ�:  + 
ƥ����� : ƥ��ǰ����ַ�����1�λ���

fo+ --> fooooooooooo   fo

In [37]: re.findall('fo+',"fooooooabceffo")
Out[37]: ['foooooo', 'fo']


8. ƥ���ظ�

Ԫ�ַ� : ?
ƥ����� : ƥ��ǰ����ַ�����0�λ�1��

fo? --> f  fo

In [43]: re.findall('fo?',"fooooooabceffo")
Out[43]: ['fo', 'f', 'fo']太侮辱他人ｖ

9. ƥ���ظ�

Ԫ�ַ� : {n}
ƥ����� : ƥ��ǰ����ַ��ظ�ָ���Ĵ���

fo{3} --> fooo

In [46]: re.findall('fo{3}',"fooooooabceffo")
Out[46]: ['fooo']

10. ƥ���ظ�

Ԫ�ַ� :  {m,n}
ƥ����� : ƥ��ǰ����ַ����� m -- n��

fo{2,4} --> foo  fooo  foooo

In [49]: re.findall('fo{2,4}',"fooooooabceffoo")
Out[49]: ['foooo', 'foo']

11. ƥ���ַ���

Ԫ�ַ�: [�ַ���]
ƥ�����: ƥ���ַ���������һ���ַ�

[abc123] --> a  b  c  1 2  3  
[a-z]  [A-Z]  [0-9]
[$#_a-zA-Z]

In [50]: re.findall('[A-Z][a-z]*',"Hi,This is Lua")
Out[50]: ['Hi', 'This', 'Lua']

12. ƥ���ַ���

Ԫ�ַ� : [^...]
ƥ����� : ƥ���ָ���ַ��������һ���ַ�

[^abc] --> ����a b c������һ���ַ�
[^a-z]

In [61]: re.findall('[^ ]+',"This is a test")
Out[61]: ['This', 'is', 'a', 'test']


13. ƥ������(��)�����ַ�

Ԫ�ַ� :  \d    \D
ƥ�����: \d  ƥ������һ�������ַ�  [0-9]
          \D  ƥ������һ���������ַ�  [^0-9]

In [63]: re.findall('\d+',"2018��Ϳ��ȥ,2019���ϵ���")
Out[63]: ['2018', '2019']

14.  ƥ������(��)��ͨ�ַ�

Ԫ�ַ� :  \w   \W
ƥ�����: \w  ƥ����ͨ�ַ� (������ĸ�»���,utf8�ַ�)
          \W  ƥ�������ַ�

In [71]: re.findall('\w+',"PORT#1234,Error 44% �½�")
Out[71]: ['PORT', '1234', 'Error', '44', '�½�']


15. ƥ������(��)���ַ�

Ԫ�ַ� : \s   \S
ƥ�����: \s ƥ��������ַ�  [ \r\n\t\v\f]
          \S ƥ������ǿ��ַ�

In [72]: re.findall('\w+\s+\w+',"hello   world")
Out[72]: ['hello   world']

In [74]: re.findall('^\S+',"Terna-123#H xxxxxxx")
Out[74]: ['Terna-123#H']

16. ƥ���ַ�����ͷ��βλ��

Ԫ�ַ� : \A  \Z
ƥ�����: \A  ƥ���ַ�����ͷλ��
          \Z  ƥ���ַ�����βλ��

In [80]: re.findall('\A\d+-\d+\Z',"1000-15000")
Out[80]: ['1000-15000']


����ƥ��(��ȫƥ��) : ��֤������ʽƥ��Ŀ���ַ�����                       ȫ������


17.  ƥ��(��)���ʱ߽�

Ԫ�ַ� : \b    \B
ƥ�����: \b ƥ�䵥�ʱ߽� (��ͨ�ַ��������ַ��Ľ���) 
          \B ƥ��ǵ��ʱ߽�

In [85]: re.findall(r'\bis\b',"This is a boy")
Out[85]: ['is']

In [86]: re.findall(r'\Bis',"This is a boy")
Out[86]: ['is']


Ԫ�ַ��ܽ�

ƥ�䵥���ַ�:  .  [...]  [^...] \d  \D  \w \W  \s  \S

ƥ���ظ�:  *   +   ?   {n}   {m,n} 

ƥ��λ��: ^  $   \A  \Z   \b  \B

����: |  ()  \



������ʽ��ת��

    �����������: . * + ? ^ $ () [] | \

    ������ʽ���ƥ�������ֱ��������Ҫ��\
    e.g.  ƥ���ַ� .   ��  \.

    Ŀ���ַ���     ������ʽ        �ַ���
        $10            \$\d+        "\\$\\d+"

    raw�ִ�: ���ַ���������ת�����

       r'\$\d+' ==> '\\$\\d+'


̰���ͷ�̰��

̰��ģʽ: ������ʽ���ظ�ƥ��Ĭ�����Ǿ����ܶ�����           ƥ������

   *   +   ?   {m,n}

��̰��(����)ģʽ : �������ٵ�ƥ������

   ̰��-->��̰��   *?  +?  ??  {m,n}?

In [105]: re.findall(r'ab+?',"abbbbbbbbb")
Out[105]: ['ab']


������ʽ����

ʹ�� () ����Ϊ������ʽ�ڲ���������. ͨ�����鹹��������ʽ���ڲ����崦����

* ������������ʽ��һ����,������Ҫ�������ܹ�ƥ����   �ݵ�ǰ���·�������

���������

    1. ��Ϊһ���ڲ�����,�ı�ĳЩԪ�ַ��Ĳ�������
 re.search(r'\w+@\w+\.(com|cn)','abc@123.cn').group()
 Out[113]: 'abc@123.cn'

    2. ��ƥ�䵽���ݵ�ǰ����,�����Ӧ���ݿ��Ե�����ȡ
 re.search(r'(http|https|ftp)://\S+','https://www.baidu.com').group(1)
  Out[116]: 'https'


������ͷǲ�����

  ������ : ������������
      ��ʽ :   (?P<name>pattern)

      ���� : ���ֿ��Ա��һ���ĺ���,Ҳ����ͨ��������        ��ȡ�����Ӧ����
   
     re.search(r'(?P<big>[A-Z])\w*','Hello world').group('big')
      Out[119]: 'H'

* һ��������ʽ�п����ж������.������龡����Ҫ�ص����߹���Ƕ��.ͨ�����⵽��,�����ҷ�Ϊ��һ�ڶ�����


������ʽ�����ԭ��:
1. ��ȷ�� : �ܹ���ȷ��ƥ��Ŀ���ַ���
2. ������ : ����Ҫƥ�������,�����ܲ���ƥ�䵽������             ������
3. ȫ���� : �����ܽ�Ŀ���ַ�����ȫ���������ȫ��,��             ��©


reģ��

regex = compile(pattern,flags = 0)
����: ����������ʽ����
����: pattern  ������ʽ
      flags  ���ܱ�ʶ,�����ḻ������ʽ����
����ֵ : ������ʽ����

re.findall(pattern,string,flags)
����: ʹ��������ʽƥ��Ŀ���ַ���
����: pattern  ������ʽ
      string   Ŀ���ַ���
      flags  ��־λ
����ֵ: �б�, ƥ�䵽������
        ���������ʽ��������ֻ��ȡ�����Ӧ����

regex.findall(string,pos,endpos)
����: ʹ��������ʽƥ��Ŀ���ַ���
����: string Ŀ���ַ���
      pos  ƥ��Ŀ�����ʼλ��
      endpos  ƥ��Ŀ��Ľ���λ��
����ֵ: �б�, ƥ�䵽������
        ���������ʽ��������ֻ��ȡ�����Ӧ����
  
re.split(pattern,string,flags)
���� : ʹ������ƥ�䵽�Ĳ����и�Ŀ���ַ���
���� : pattern  ����
       string  Ŀ���ִ�
       flags  ��־λ
����ֵ : �����б�,Ϊ�и������

re.sub(pattern,replaceStr,string,max,flags)
����: ʹ���ַ����滻ƥ�䵽������
����: replaceStr  �滻�ִ�
      max ����滻���� Ĭ��ȫ���滻
����ֵ : �����滻����ַ���

re.subn(pattern,replaceStr,string,max,flags)
���ܲ���ͬsub
����ֵ : �����滻����ַ������滻����


re.finditer(pattern,string,flags)
���� : ʹ��������ʽƥ��Ŀ���ַ���
���� : pattern ����
       string  Ŀ���ִ�
       flags  ��־λ
����ֵ : ����һ������ƥ�����ݵĵ�������


re.fullmatch(pattern,string,flags)
���� : ��ȫƥ��һ��Ŀ���ַ���
���� : pattern ����
       string  Ŀ���ִ�
       flags  ��־λ
����ֵ : match����

re.match(pattern,string,flags)
���� : ƥ��һ��Ŀ���ַ�����ʼλ��
���� : pattern ����
       string  Ŀ���ִ�
       flags  ��־λ
����ֵ : match����


search(pattern,string,flags)
���� : ƥ��Ŀ���ַ�����һ��ƥ������
���� : pattern ����
       string  Ŀ���ִ�
       flags  ��־λ
����ֵ : match����


compile�������Ա���

pattern : ������ʽ

flags : ��־λֵ

groupindex : ��ȡ���������Ͷ�Ӧ���кŵ��ֵ�

groups: ��������


match��������Ժͺ���

����
pos    #Ŀ���Ӵ���ʼλ��
endpos #Ŀ���Ӵ�����λ��
re     #������ʽ
string    #Ŀ���ַ���
lastgroup #���һ������
lastindex #���һ�����к�


����
start() #ƥ�����ݵĿ�ʼλ��
end()   #ƥ�����ݵĽ���λ��
span()  #ƥ�����ݵ���ֹλ��

group(n)
���� : ��ȡmatch����Ķ�Ӧ����
���� : Ĭ��Ϊ0��ʾ��ȡmatch�������ж�Ӧ����
       ���Ϊ>0�������ʾĳ�������Ӧ����
       ���Ϊ�����������ʾ��Ӧ������ƥ������
����ֵ: ���ض�Ӧ�ַ���


groupdict()
����: ��ȡ������Ͷ�Ӧֵ���ֵ�

groups()
����: ��ȡ���������Ӧ����


��ҵ:  ʹ��reģ�� ���� �� compile ��дһ��
       ���Ԫ�ַ�
       ��дһ������,ƥ��һ���ĵ���
       1. ���д�д��ĸ��ͷ����
       2. ��������,���ְ��� 
          ���� С��  ���� �ٷ��� ����
	  123   1.24  1/2  45%    -2.5

